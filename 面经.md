### 一面

1. HashMap的实现原理，什么是hash碰撞，怎样解决hash碰撞？ 3.ConcurrentHashMap的原理，与HashTable的区别？
2. HashSet和TreeSet的区别以及底层实现原理
3. HashMap中存key-value，value有重复但是都是Comparable类型可比较；怎样根据value排序此集合，介绍实现方法
4. ReentrantLock和synchronized关键字有什么区别？
5. synchronized 修饰static方法，具体锁的是什么？
6. 工作当中cpu和内存异常排查方法；详细说明分析过程及定位解决方式
7. 接着是讲项目，项目里的问题比较简单； 然后就是各种基础，jvm内存模型，nio，bio，aio，高并发，sychronized和volltail，HashMap，数据结构和扩容； 还有一些场景题目，大并发/海量数量的情况下，怎么设计系统。从里面拿出两点来问，一个是系统解耦，一个是分库分表； 最后一个是编码题，HashMap里key是自定义对象的情况，排序 jvm问的比较多，线上发版如何做到分批发的，redis命令，数据结构，数据库内部锁机制，线上问题解决，sql优化等等;

### 二面

1. ClassLoader的原理,举出应用场景及工作实例，介绍类加载过程及工作中的应用 2.HashMap的实现原理，什么是hash碰撞，怎样解决hash碰撞？ 
2. 一个jvm的原理及优化；
3. sql的优化；
4. 现在使用的框架原理，比如使用了dubbo，会问dubbo的原理，还有h5怎么调用dubbo等；
5. 接着是讲项目，项目里的问题比较简单；

### 三面

1. executor service实现的方法，可以设置的参数；
2. 出了个算法提，找出链表中倒数第n个节点；
3. 还问了thread和runable的区别；
4. 聚簇索引是什么；
5. redis问了一个实际问题的解决办法，如果redis一个value特别大，有什么解决方案；
6. redis内存淘汰机制；
7. mysql的默认隔离级别；
8. 堆排序
9.  跨机房部署，遇到的问题及解决方案，全年的9999率 11. MMM的DB架构，主从未完全同步，master挂了，未同步的内容会造成什么影响，怎么恢复
10.  ng和tomcat什么区别？能否将两者角色互换。即：tomcat做反向代理，ng做服务容器。说明原因。
11. DNS协议
12. volatile实现原理
13. NAT：公网ip和局域网ip转换
14. 类加载委托机制，锁的应用，项目架构

### 四面

1.  jit，nio，排序算法，hashmap，更多的是项目细节~
2. 谈谈项目里主要负责了什么，负责的项目是怎样的架构，自己负责了什么等等； 2、JVM类加载机制；
3. JVM内存模型，栈空间都放什么，什么情况下栈内存会溢出等；
4. JVM调优；
5. JVM垃圾收集机制；
6. 比较关心金融方面的知识是否了解，是否有过金融项目开发的经验；
7. jvm栅栏问题，threadlocal的使用；
8. JVM
9. 多线程
10. List求交集
11. 解决项目运行时，CPU占用过高的问题
12. 线程同步几种机制
13. linux检索log，匹配某一请求最多的top10



## 阿里巴巴

### 阿里智能引擎事业部

#### 一面

##### 介绍一下gossip协议，说一下akka的故障检测机制

[gossip算法详细说明](http://blog.csdn.net/chen77716/article/details/6275762)

原理：在一个有界网络中，每个节点都随机与其他节点通信，经过一番杂乱无章的通信后，最后所有节点的状态会达成一致。

akka gossip网络中两个节点有三种通信方式

- push：A节点把数据(key, value,version)和对应的版本号推送给B节点，B节点更新A中比自己新的数据
- pull：A仅将key, version推送给B，B将本地比A新的数据推送给A，A更新本地
- push&pull：与pull类似，这是多了一步，A再将本地比B新的数据推送给B，B更新本地

gossip的执行过程：

1. 某节点定时发起一次gossip

   （1）首先选择当前没有再gossip的seen队列中的节点，如果存在这样的节点则随机选择一个节点，向他发起一次gossip交互

   （2）如果所有成员都在seen队列中，则随机选择一个节点向它仅仅发送当前gossip的版本信息（矢量钟）

2. 每个节点都会定时判断本次gossip是否收敛

3. 节点发现某次gossip收敛，则判断自己是否是leader，是的话执行相关leader动作



##### akka actor mailbox是串行还是并行的，如果actor处理阻塞了怎么办，给一个最佳实践

actor之间是异步的，actor内部处理是串行的。

业务Actor可以通过自定义线程池来处理mailbox中的消息，避免阻塞



##### 生产环境问题分析：GC、死锁等怎么排查



##### 介绍一下双亲委派，如果要在项目中加载两个有冲突的jar包应该怎么办，给出最佳实践

自定义类加载器，并重写loadClass方法（破坏双亲委派机制），用不同的类加载器实例分别加载两个有冲突的jar包。

##### 消息队列问题，如果消费者处理失败，应该怎么处理？如果通过重发消息的话怎么保证幂等性

需要业务来保证幂等性，以下是常见的业务幂等性保证方法

> 1、利用数据库的唯一约束实现幂等

比如将订单表中的订单编号设置为唯一索引，创建订单时，根据订单编号就可以保证幂等

> 2、去重表

这个方案本质也是根据数据库的唯一性约束来实现。其实现大体思路是：首先在去重表上建唯一索引，其次操作时把业务表和去重表放在同个本地事务中，如果出现重现重复消费，数据库会抛唯一约束异常，操作就会回滚

> 3、利用redis的原子性

每次操作都直接set到redis里面，然后将redis数据定时同步到数据库中

> 4、多版本（乐观锁）控制

此方案多用于更新的场景下。其实现的大体思路是：给业务数据增加一个版本号属性，每次更新数据前，比较当前数据的版本号是否和消息中的版本一致，如果不一致则拒绝更新数据，更新数据的同时将版本号+1

> 5、状态机机制

此方案多用于更新且业务场景存在多种状态流转的场景

> 6、token机制

生产者发送每条数据的时候，增加一个全局唯一的id，这个id通常是**业务的唯一标识**，比如订单编号。在消费端消费时，则验证该id是否被消费过，如果还没消费过，则进行业务处理。处理结束后，在把该id存入redis，同时设置状态为已消费。如果已经消费过了，则不进行处理。

##### java多线程、自旋锁、可重入锁

##### 在一台内存有限、CPU有限、存储无限的机器上，对一个超大文件的内容进行排序，文件中每一行都是整数，给一个方案。哪个排序算法速度最快

##### 用etcd实现分布式锁是怎么做的

##### 项目介绍，哪个项目最有挑战

##### 有没有关注一下前沿技术
